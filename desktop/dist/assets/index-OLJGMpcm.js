import{u as p,j as e,i as f,L as b}from"./index-InTZOm33.js";import{r as i}from"./vendor-react-CckeeW4p.js";import{J as j}from"./vendor-ui-Dw6ShKlL.js";function N({onNext:c,initialPath:t="",initialRecursive:n=!0}){const{t:r}=p(),[l,d]=i.useState(t),[o,x]=i.useState(n),[m,s]=i.useState(!1),u=async()=>{try{s(!0);const a=await f.selectFolder();a&&d(a)}catch(a){console.error("Failed to select folder:",a)}finally{s(!1)}},y=()=>{l&&c(l,o)};return e.jsxs("div",{className:"flex flex-col gap-6 max-w-2xl mx-auto mt-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r("ingestion.step1.title","Select Source Directory")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:r("ingestion.step1.subtitle","Choose the folder containing your documents.")})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:r("ingestion.directoryPath","Directory Path")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,readOnly:!0,className:"flex-1 px-4 py-2 rounded-md border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white cursor-not-allowed",placeholder:r("ingestion.selectPlaceholder","No folder selected...")}),e.jsxs("button",{onClick:u,disabled:m,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md transition-colors disabled:opacity-50",children:[e.jsx(j,{size:18}),r("common.browse","Browse")]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",id:"recursive",checked:o,onChange:a=>x(a.target.checked),className:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700"}),e.jsx("label",{htmlFor:"recursive",className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer select-none",children:r("ingestion.includeSubfolders","Include subfolders")})]})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:y,disabled:!l,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r("common.next","Next")," â†’"]})})]})}function w(){const{t:c}=p(),[t,n]=i.useState(1),[r,l]=i.useState(!1),[d,o]=i.useState(""),[x,m]=i.useState(!0),[s,u]=i.useState(null),y=async(a,h)=>{o(a),m(h),l(!0);try{const g=await f.scanDirectory(a,h);u(g),n(2)}catch(g){console.error("Scan failed:",g)}finally{l(!1)}};return r?e.jsx(b,{message:c("ingestion.scanning","Scanning directory...")}):e.jsxs("div",{className:"container mx-auto px-4 py-8 h-full",children:[e.jsxs("div",{className:"max-w-2xl mx-auto mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:t>=1?"text-primary-600 dark:text-primary-400":"",children:"Select Source"}),e.jsx("span",{className:t>=2?"text-primary-600 dark:text-primary-400":"",children:"Analysis"}),e.jsx("span",{className:t>=3?"text-primary-600 dark:text-primary-400":"",children:"Metadata"}),e.jsx("span",{className:t>=4?"text-primary-600 dark:text-primary-400":"",children:"Configure"})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-600 transition-all duration-300 ease-out",style:{width:`${t/4*100}%`}})})]}),t===1&&e.jsx(N,{onNext:y,initialPath:d,initialRecursive:x}),t===2&&e.jsxs("div",{className:"text-center mt-20",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analysis Complete (Placeholder)"}),e.jsxs("p",{className:"mt-4",children:["Found ",s==null?void 0:s.total_files," files."]}),e.jsx("pre",{className:"text-left bg-gray-100 dark:bg-gray-800 p-4 rounded mt-4 overflow-auto max-h-96",children:JSON.stringify(s==null?void 0:s.stats_by_type,null,2)}),e.jsx("button",{onClick:()=>n(1),className:"mt-4 px-4 py-2 border rounded",children:"Back"})]})]})}export{w as IngestionWizard};
